#+TITLE: Reference Sheet for Discrete Maths
#+AUTHOR: [[http://www.cas.mcmaster.ca/~alhassm/][Musa Al-hassy]] and Wolfram Kahl
#+EMAIL: alhassy@gmail.com
#+DESCRIPTION: This document is written by Musa Al-hassy for his learning in the spring of 2018.
#+STARTUP: hideblocks
#+STARTUP: overview
#+INCLUDE: ~/CheatSheet/CheatSheetSetup.org
# This file is built around the system https://github.com/alhassy/CheatSheet

#+todo: space

# Make HTML
# (f-move (org-html-export-to-html) "~/CalcCheck/LectureNotes.html")
#+HTML_HEAD: <link href="https://alhassy.github.io/org-notes-style.css" rel="stylesheet" type="text/css" />
#+HTML_HEAD: <link href="https://alhassy.github.io/floating-toc.css" rel="stylesheet" type="text/css" />
#+HTML_HEAD: <link href="https://alhassy.github.io/blog-banner.css" rel="stylesheet" type="text/css" />
# The last one has the styling for lists.

# Example unicode declarations; see section â€œunicodeâ€ below.
# make a symbolic link!
# https://armkeh.github.io/unicode-sty/
#+LATEX_HEADER: \usepackage{\string~"/unicode-sty/unicode"}
#+LATEX_HEADER: \newunicodechar{â‹†}{\ensuremath{\star}}
#+LATEX_HEADER: \newunicodechar{â¨¾}{\ensuremath{;}}
#+LATEX_HEADER: \newunicodechar{â€²}{\ensuremath{'}}
#+LATEX_HEADER: \newunicodechar{âŠ‡}{\ensuremath{\supseteq}}
#+LATEX_HEADER: \newunicodechar{â”€}{---}
#+LATEX_HEADER: \newunicodechar{â—}{\ensuremath{\lhd}}
#+LATEX_HEADER: \newunicodechar{â–·}{\ensuremath{\rhd}}

#+LATEX_HEADER: \newunicodechar{â‡’}{\ensuremath{\Rightarrow}}
#+latex: \def\implies{\Rightarrow}

# +LATEX_HEADER: \newunicodechar{â‡’}{\ensuremath{\Rightarrow}}
# The â‡’ in unicode.sty has extra spacing?

#+latex: \def\true{\mathsf{true}}
#+latex: \def\false{\mathsf{false}}

#+latex: \def\remark#1{\color{gray!80} #1}

* Propositional Calculus
  :PROPERTIES:
  :CUSTOM_ID: Propositional-Calculus
  :END:

# + Metatheorem :: Any two theorems are equivalent; â€˜$\true$â€™ is a theorem.

Order of decreasing binding power: =, Â¬, âˆ§/âˆ¨, â‡’/â‡, â‰¡/â‰¢.

*[[https://ac.els-cdn.com/S0020019000002052/1-s2.0-S0020019000002052-main.pdf?_tid=35e86bb2-edb0-11e7-b1fe-00000aab0f26&acdnat=1514672861_56b3d86466d284cbc76cc2641c47af86][Equivales]]* is the only equivalence relation that is associative
@@latex:\newline@@ $((p \equiv q) \equiv r)\equivs (p \equiv (q \equiv r))$, and
it is symmetric and has identity $\true$.

# +latex: \vspace{0.1em}
*Discrepancy* (difference) â€˜â‰¢â€™ is symmetric, associative, has identity â€˜$\false$â€™,
mutually associates with equivales $((p \not\equiv q) \equiv r) \equivs (p
\not\equiv (q \equiv r))$, and mutually interchanges with it as well $(p
\not\equiv q \equiv r) \equivs (p \equiv q \not\equiv r)$.
Finally, negation commutes with difference: $Â¬ (p â‰¡ q) â‰¡ Â¬ p â‰¡ q$.

*** implication                                                      :ignore:
    :PROPERTIES:
    :CUSTOM_ID: implication
    :END:

#+latex: \vspace{0.1em}

*Implication* has the alternative definition $p \implies q \;\equiv\; \lnot p \lor
q$, thus having $\true$ as both left identity and right zero; it distributes
over $\equiv$ in the second argument, and is self-distributive; and has the
properties:
#+latex: \vspace{-0.5em}
#+begin_parallel

+ Shunting :: $p \land q \implies r \;â‰¡\;  p \implies (q \implies r)$
  @@latex:\vspace{1em}@@
+ Contrapositive ::  $p \implies q \quad\equiv\quad \lnot q \implies \lnot p$
    @@latex:\vspace{1em}@@
+ Leibniz :: $e = f \;â‡’\; E[z â‰” e] = E[z := f]$

#+columnbreak:
#+latex: \columnbreak

+ Modus Ponens :: @@latex:\invisible{hi}\vspace{0.5em}@@
  | $p \land (p \implies q)$ | $\equiv$  | $p \land q$ |
  | $p \land (q \implies p)$ | $\equiv$  | $p$         |
  | $p \land (p \implies q)$ | $\implies$ | $q$         |

#+end_parallel

It is a /linear/ order relation generated by â€˜$\false \implies \true$â€™; whence
â€œfrom false, follows anythingâ€: $\false \implies p$.  Moreover it has the useful
properties â€œ(3.62) Contextualisationâ€: $p \implies (q \equiv r) \;â‰¡\; p \land q
\equivs p \land r$ ---we /have/ the context /p/ in each side of the equivalence---
and $p â‡’ (q â‡’ r) \;â‰¡\; p âˆ§ q \,â‡’\, p âˆ§ r$.
Implication is â€œSub-associativeâ€: $((p â‡’ q) â‡’ r) \;â‡’\; (p â‡’ (q â‡’ r))$.
Finally, we have â€œâ‰¡-â‰¡ Eliminationâ€:
$(p â‰¡ q â‰¡ r) â‡’ s \;â‰¡\; p â‡’ s \;â‰¡\; q â‡’ s \;â‰¡\; r â‡’ s$.

*** conjunction and disjunction                                      :ignore:
    :PROPERTIES:
    :CUSTOM_ID: conjunction-and-disjunction
    :END:

#+latex: \vspace{0.1em}

*Conjunction and disjunction* distribute over one another, are both associative
and symmetric, âˆ¨ has identity $\false$ and zero $\true$ whereas âˆ§ has identity
$\true$ and zero $\false$, $\lor$ distributes over $âˆ¨, â‰¡, âˆ§, â‡’, â‡$ whereas
$\land$ distributes over $\equiv\!-\!\equiv$ in that $p \land (q \equiv r
\equiv s) \;â‰¡\; p \land q \equivs p \land r \equivs p \land s$, and they
satisfy,

| *Excluded Middle* | *Contradiction*      | *Absorption*              | *De Morgan*               |
| $p âˆ¨ Â¬p$        | $p âˆ§ Â¬ p â‰¡~\false$ | $p âˆ§ (q âˆ¨ Â¬ p) â‰¡ p âˆ§ q$ | $Â¬ (p âˆ§ q) â‰¡ Â¬ p âˆ¨ Â¬ q$ |
|                 |                    | $p âˆ¨ (q âˆ¨ Â¬ p) â‰¡ p âˆ¨ q$ | $Â¬ (p âˆ¨ q) â‰¡ Â¬ p âˆ§ Â¬ q$ |

Most importantly, they satisfy the *â€œGolden Ruleâ€*: $p âˆ§ q â‰¡ p â‰¡ q â‰¡ p âˆ¨ q$.

**** COMMENT alternate table
     :PROPERTIES:
     :CUSTOM_ID: COMMENT-alternate-table
     :END:
#+begin_parallel 3

+ Excluded Middle ::  $p \lor \lnot p$

+ Contradiction ::
  #+LaTeX: {hi. \vspace{-2em} $\invisible{Hi! Hello!}~p \land \lnot p \equiv~\false$}

  # + \scriptsize Contradiction :: \scriptsize $p \land \lnot p \equiv~\false$

#+latex: \columnbreak

+ Absorption ::
    | $p âˆ§ (q âˆ¨ Â¬ p)$ | â‰¡ | $p âˆ§ q$ |
    | $p âˆ¨ (q âˆ§ Â¬ p)$ | â‰¡ | $p âˆ¨ q$ |

#+latex: \columnbreak

+ De Morgan ::
   | $\lnot (p \land q)$ | \equiv | $\lnot p \lor  \lnot q$ |
   | $\lnot (p \lor q)$  | \equiv | $\lnot p \land \lnot q$ |

#+end_parallel

*** Max/Min :ignore:

#+latex: \vspace{-0.1em}

*Max â†‘ and Min â†“* each distribute over the other, addition distributes over both,
subtraction acts like De Morgans, the operators are selective, and non-negative
multiplication distributes over both.
#+latex: {\remark{(\emph{Tropical mathematics} is math with â€˜â†‘, +â€™ instead of â€˜+, Ã—â€™.)}}
# +latex: \remark{(Working with the max-plus calculus, â€˜+, â†‘â€™, is known as \emph{tropical mathematics}.)}

*** Remaining properties :ignore:

#+latex: \vspace{-0.1em}

The many other properties of these operations ---such as weakening laws and
other absorption laws and case-analysis (âŠ”-char)--- can be found by looking at
the list of /lattice properties/ ---since /both/ the Booleans (â‡’, âˆ§, âˆ¨) and numbers
(â‰¤, â†“, â†‘) are lattices.

* COMMENT Contextual Laws

+ Axiom, Leibniz :: $e = f â‡’ E[z â‰” e] = E[z := f]$
  - â€œReplacement, Contextâ€: $P \,âˆ§\, e = f â‡’ E[z â‰” e] = E[z := f]$
    # Shunting, then leibniz, then right zero of â‡’
  - â€œReplacement, Contextâ€: $P \,âˆ§\, e = f â‡’ E[z â‰” e] \;â‰¡\; P \,âˆ§\, e = f â‡’ E[z := f]$
  - â€œReplacement, Contextâ€: $e = f \,âˆ§\, E[z â‰” e] \;â‰¡\; e = f \,âˆ§\, E[z := f]$

+ Replacing variables by Boolean constants ::

  - â€œReplace by trueâ€: $q âˆ§ p â‡’ E^z_p \;â‰¡\; q âˆ§ p â‡’ E^z_\true$
  - â€œReplace by falseâ€: $E^z_p â‡’ p âˆ¨ q \;â‰¡\; E^z_\false â‡’ p âˆ¨ q$
  - â€œReplace by trueâ€: $p âˆ§ E_p^z \;â‰¡\; p âˆ§ E_\true^z$
  - â€œReplace by falseâ€: $p âˆ¨ E_p^z \;â‰¡\; p âˆ¨ E_\false^z$
  - â€œCase analysisâ€: $E_p^z \;â‰¡\; (p âˆ§ E_\true^z) âˆ¨ (Â¬  p âˆ§ E_\false^z)$

* newpage                                                            :ignore:
  :PROPERTIES:
  :CUSTOM_ID: COMMENT-newpage
  :END:
\columnbreak
* Orders

#+latex: \vspace{1em}
An /order/ is a relation $\_âŠ‘\_ \,:\, Ï„ â†’ Ï„ â†’ ğ”¹$  satisfying the following three properties:
|             |   |                                 |   |                                 |
| *Reflexivity* |   | *Transitivity*                    |   | *Mutual Inclusion*                |
| $a âŠ‘ a$     |   | $a âŠ‘ b \,âˆ§\, b âŠ‘ c \,â‡’\, a âŠ‘ c$ |   | $a âŠ‘ b \,âˆ§\, b âŠ‘ a \;â‰¡\; a = b$ |

# *Antisymmetry* $a âŠ‘ b \,âˆ§\, b âŠ‘ a \,â‡’\, a = b$ |                        |
# Lemma â€œReflexivity of âŠ‘â€: R = S â‡’ R âŠ‘ S
# - Theorem â€œMutual inclusionâ€: R = S â‰¡ R âŠ‘ S âˆ§ S âŠ‘ R
# - Axiom â€œOpposite inclusionâ€: R âŠ’ S â‰¡ S âŠ‘ R

Indirect Inclusion is like â€˜set inclusionâ€™ and Indirect Equality is like â€˜set
extensionalityâ€™.

# Provided Â¬occurs(`z`, `x, y`)
# - Indirect Equality (from above) ::  $x = y \;â‰¡\; (âˆ€ z â€¢ x âŠ‘ z â‰¡ y âŠ‘ z )$
# - Indirect Equality (from below) ::  $x = y \;â‰¡\; (âˆ€ z â€¢ z âŠ‘ x â‰¡ z âŠ‘ y )$
# - Indirect Inclusion (from above) :: $x âŠ‘ y \;â‰¡\; (âˆ€ z â€¢ y âŠ‘ z â‡’ x âŠ‘ z )$
# - Indirect Inclusion (from below) :: $x âŠ‘ y \;â‰¡\; (âˆ€ z â€¢ z âŠ‘ x â‡’ z âŠ‘ y )$
#
|                                      |                                      |
| *Indirect Equality (from above)*       | *Indirect Inclusion (from above)*      |
| $x = y \;â‰¡\; (âˆ€ z â€¢ x âŠ‘ z â‰¡ y âŠ‘ z )$ | $x âŠ‘ y \;â‰¡\; (âˆ€ z â€¢ y âŠ‘ z â‡’ x âŠ‘ z )$ |
|                                      |                                      |
| *Indirect Equality (from below)*       | *Indirect Inclusion (from below)*      |
| $x = y \;â‰¡\; (âˆ€ z â€¢ z âŠ‘ x â‰¡ z âŠ‘ y )$ | $x âŠ‘ y \;â‰¡\; (âˆ€ z â€¢ z âŠ‘ x â‡’ z âŠ‘ y )$ |

An order is /bounded/ if there are elements $âŠ¤, âŠ¥ : Ï„$ being the lower and upper bounds of all other elements:
|                |                     |   |                   |                     |
| *Top Element*    | $a \,âŠ‘\, âŠ¤$         |   | *Bottom Element*    | $âŠ¥ \,âŠ‘\, a$         |
|                |                     |   |                   |                     |
| *Top is maximal* | $âŠ¤ âŠ‘ a \;â‰¡\; a = âŠ¤$ |   | *Bottom is minimal* | $a âŠ‘ âŠ¥ \;â‰¡\; a = âŠ¤$ |

* Lattices
  :PROPERTIES:
  :CUSTOM_ID: Lattices
  :END:

#  Equaltiy via joins :: x = y â‰¡ (âˆ€ z â€¢ x âŠ” z = y âŠ” z)

A /lattice/ is a pair of operations $\_âŠ“\_,\, \_âŠ”\_ \,:\, Ï„ â†’ Ï„ â†’ Ï„$ specified by the properties:
|                                         |                     |                                         |
| *âŠ”-Characterisation*                      | @@latex: $\qquad$@@ | *âŠ“-Characterisation*                      |
| $a âŠ‘ c \,âˆ§\, b âŠ‘ c \;â‰¡\; a âŠ” b \;âŠ‘\; c$ |                     | $c âŠ‘ a \,âˆ§\, c âŠ‘ b \;â‰¡\; c \;âŠ‘\; a âŠ“ b$ |

The operations act as providing the greatest lower bound, â€˜glbâ€™, â€˜supremumâ€™, or
â€˜meetâ€™, by âŠ“; and the least upper bound, â€˜lubâ€™, â€˜infimumâ€™, or â€˜joinâ€™, by âŠ”.

# \hfill{\color{grey}(8.6)}}

#+LATEX_HEADER: \usepackage{amssymb}
#+LATEX_HEADER: \newunicodechar{â–¡}{\ensuremath{\square}}

#+latex: \vspace{0em}
Let $â–¡$ be one of $âŠ“$ or $âŠ”$, then:
|                    |   |                                |   |                  |
| *Symmetry of â–¡*      |   | *Associativity of â–¡*             |   | *Idempotency of â–¡* |
| $a â–¡ b \eqs b â–¡ a$ |   | $(a â–¡ b) â–¡ c \eqs a â–¡ (b â–¡ c)$ |   | $a â–¡ a \eqs a$   |
|                    |   |                                |   |                  |

#
| *Zero of â–¡*   | *Identity of â–¡* | *Absorption*        | *Self-Distributivity of â–¡*              |
| $a âŠ” âŠ¤ = âŠ¤$ | $a âŠ” âŠ¥ = a$   | $a âŠ“ (b âŠ” a) = a$ | $a â–¡ (b â–¡ c) \;=\; (a â–¡ b) â–¡ (a â–¡ c)$ |
| $a âŠ“ âŠ¥ = âŠ¥$ | $a âŠ“ âŠ¤ = a$   | $a âŠ” (b âŠ“ a) = a$ |                                       |
|             |               |                   |                                       |

#
| *Weakening*           | *Induced Defs. of Inclusion*                           | *Golden Rule*                                                   |
| */ Strengthening*     | $a âŠ‘ b \;â‰¡\; a âŠ” b \eqs b$                         | \hspace{-1em}$a âŠ“ b \;=\; a \hspace{1.52em}\equivs b = a âŠ” b$ |
| $a \;âŠ‘\; a âŠ” b$     | $a âŠ‘ b \;â‰¡\; a âŠ“ b \eqs a$                         | \hspace{-1em}$a âŠ“ b \;=\; a âŠ” b \equivs a = b$                |
| $a âŠ“ b \;âŠ‘\; a$     |                                                      | \hspace{-1em}$a âŠ” b \;âŠ‘\; a âŠ“ b \equivs a = b$                |
| $a âŠ“ b \;âŠ‘\; a âŠ” b$ | *Monotonicity of â–¡*                                    |                                                               |
|                     | $a âŠ‘ b \,âˆ§\, c âŠ‘ d \;\,â‡’\,\; a â–¡ c \;âŠ‘\; b â–¡ d$ |                                                               |

# Weakening/Strengthening :: $a âŠ” (b âŠ“ c) \;âŠ‘\; a âŠ” b$ and $a âŠ“ b \;âŠ‘\; a âŠ“ (b âŠ”
# c)$
# Both follow from monotonicity

# \hfill{\color{grey}(7.9)

The following four properties are all equivalent:
#+latex: \vspace{-0.8em}
| âŠ“-Selective :: $âˆ€ a, b \;â€¢\; a âŠ“ b = a \,âˆ¨\, a âŠ“ b = a$ | âŠ”-Selective :: $âˆ€ a, b \;â€¢\; a âŠ” b = a \,âˆ¨\, a âŠ” b = a$ |
| Linearity :: $âˆ€ a, b \;â€¢\; a âŠ‘ b \,âˆ¨\, b âŠ‘ a$           | Order Complement ::  $Â¬ (a âŠ‘ b) \;â‰¡\; b âŠ a$            |

#+BEGIN_EXPORT latex
{\small \textbf{Duality Principle:} \\
If a statement $S$ is a theorem, then so is
$S[(âŠ‘, âŠ“, âŠ”, âŠ¤, âŠ¥) := (âŠ’, âŠ”, âŠ“, âŠ¥, âŠ¤)]$}.
#+END_EXPORT

* newpage                                                            :ignore:
  :PROPERTIES:
  :CUSTOM_ID: COMMENT-newpage
  :END:
\newpage
* Conditionals

#+latex: \def\IF#1#2#3{\mathsf{if}\, #1 \,\mathsf{then}\, #2\, \mathsf{else}\, #3\, \mathsf{fi}}

â€œIf to âˆ§â€ may be taken as axiom from which we may prove the remaining
â€˜alternative definitionsâ€™ â€œif to â‹¯â€.

# |            |                                                                          |
# | *if to âˆ§*    | $P[z â‰” \IF{b}{x}{y}] \quadâ‰¡\quad (b â‡’ P[z â‰” x]) \;âˆ§\; (Â¬ b â‡’ P[z := x])$ |
# | *if to â‰¢*    | $P[z â‰” \IF{b}{x}{y}] \quadâ‰¡\quad \,b âˆ§ P[z â‰” x] \,\;â‰¢\; Â¬ b âˆ§ P[z := x]$ |
# | *if to âˆ¨*    | $P[z â‰” \IF{b}{x}{y}] \quadâ‰¡\quad (b âˆ§ P[z â‰” x]) \;âˆ¨\; (Â¬ b âˆ§ P[z := x])$ |
# | *if to â‰¡*    | $P[z â‰” \IF{b}{x}{y}] \quadâ‰¡\quad b â‡’ P[z â‰” x] \;â‰¡\; Â¬ b â‡’ P[z := x]$     |
#

#+latex: \vspace{-1em}
#+begin_export latex
\begin{align*}
   \textbf{if to âˆ§}\qquad   & P[z â‰” \IF{b}{x}{y}] & \;â‰¡\quad & (b   \;â‡’\;     P[z â‰” x]) &\!\!âˆ§\;\;&  (Â¬ b    \;â‡’\; P[z := x])
\\ \textbf{if to âˆ¨}\qquad   & P[z â‰” \IF{b}{x}{y}] & \;â‰¡\quad & (b   \;\,âˆ§\;\; P[z â‰” x]) &\!\!âˆ¨\;\;&  (Â¬ b    \,\;âˆ§\;\; P[z := x])
\\ \textbf{if to â‰¢}\qquad   & P[z â‰” \IF{b}{x}{y}] & \;â‰¡\quad & \;b  \;\;âˆ§\;\; P[z â‰” x]  &\!\!â‰¢\;\;&  \;\,Â¬ b \,\;âˆ§\;\; P[z := x]
\\ \textbf{if to â‰¡}\qquad   & P[z â‰” \IF{b}{x}{y}] & \;â‰¡\quad &  \,\,b \,\,â‡’\; P[z â‰” x]  &\!\!â‰¡\;\;&  \;\,Â¬ b \;â‡’\; P[z := x]
\end{align*}
#+end_export

| Note that the â€œâ‰¡â€ and â€œâ‰¢â€ rules can be parsed in multiple ways    |
| since â€˜â‰¡â€™ is   associative, and â€˜â‰¡â€™ mutually associates with â€˜â‰¢â€™. |


#
|            |                                                                          |
| *if true*    | $\IF{\true}{x}{y} \;=\; x$                                               |
| *if false*   | $\IF{\false}{x}{y} \;=\; y$                                              |
| *then true*  | $\IF{R}{\true}{P} \;=\; R âˆ¨ P$                                           |
| *then false* | $\IF{R}{\false}{P} \;=\; Â¬ R âˆ§ P$                                        |
| *else true*  | $\IF{R}{P}{\true} \;=\; R â‡’ P$                                           |
| *else false* | $\IF{R}{P}{\false} \;=\; R âˆ§ P$                                          |
|            |                                                                          |
# line break
| *if swap*                | $\IF{b}{x}{y} \;=\; \IF{Â¬b}{y}{x}$                        |
| *if idempotency*         | $\IF{b}{x}{x} \;=\; x$                                    |
|                        |                                                           |
| *if guard strengthening* | $\IF{b}{x}{y} \;=\; \IF{b âˆ§ x â‰  y}{x}{y}$                 |
| *if Context*             | $\IF{b}{E}{F} \;=\; \IF{b}{E[b â‰” \true]}{F[b â‰” \false]}$  |
|                        |                                                           |
| *if Distributivity*      | $P[z â‰” \IF{b}{x}{y}] \,=\, \IF{b}{P[z â‰” x]}{P[z â‰” y]}$    |
|                        |                                                           |
| *if junctivity*          | $\quad \big(\IF{b}{x}{y}\big) âŠ• \big(\IF{b}{xâ€²}{yâ€²}\big)$ |
|                        | $= \IF{b}{(x âŠ• xâ€²)}{(y âŠ• yâ€²)}$                            |


  :Too_much_and_not_too_helpful__just_units:
  \begin{align*}
  & \IF{b}{E}{F}
  \\ \;=\; & \IF{b}{E[b â‰” \true]}{F[b â‰” \false]}
  \\ = & \IF{b}{E âˆ§ b}{F}
  \\ = & \IF{b}{E}{F âˆ§ Â¬ b}
  \\ = & \IF{b}{b â‡’ E}{F}
  \\ = & \IF{b}{E}{F âˆ¨ b}
  \\ = & \IF{b}{E â‰¡ b}{F}
  \\ = & \IF{b}{E}{F â‰¢ b}
  \end{align*}
  :End:

# \columnbreak

* Quantification

#+latex_header: \def\Id{\mathsf{Id}}

Let ~_âŠ•_~ be an associative and symmetric operation with identity $\Id$.

| *Abbreviation*           | $(âŠ• x â€¢ P) = (âŠ• x â™ \true â€¢ P)$                     |
| *Empty range*            | $(âŠ• x â™ \false â€¢ P) = \Id$                          |
| *One-point rule*         | $(âŠ• x â™ x = E â€¢ P) = P[x â‰” E]$                      |
| *Distributivity*         | $(âŠ• x â™ R â€¢ P âŠ• Q) = (âŠ• x â™ R â€¢ P) âŠ• (âŠ• x â™ R â€¢ Q)$ |
| *Nesting*                | $(âŠ•x, y â™ X âˆ§ Y â€¢ P) = (âŠ• x â™ X â€¢ (âŠ• y â™ Y â€¢ P))$   |
| *Dummy renaming*         | $(âŠ• x â™ R â€¢ P) = (âŠ• y â™ R[x â‰” y] â€¢ P[x â‰” y])$       |
|                        |                                                     |
| *Disjoint Range split*   | $(âŠ• x â™ R âˆ¨ S â€¢ P) = (âŠ• x â™ R â€¢ P) âŠ• (âŠ• x â™ S â€¢ Q)$ |
|                        | /provided/ $R âˆ§ S â‰¡ \false$                           |
|                        |                                                     |
| *Range split*            | $\qquad (âŠ• x â™ R âˆ¨ S â€¢ P) âŠ• (âŠ• x â™ R âˆ§ S â€¢ P)$      |
|                        | $= \quad (âŠ• x â™ R â€¢ P) âŠ• (âŠ• x â™ S â€¢ Q)$             |
|                        |                                                     |
| *Idempotent Range split* | $(âŠ• x â™ R âˆ¨ S â€¢ P) = (âŠ• x â™ R â€¢ P) âŠ• (âŠ• x â™ S â€¢ Q)$ |
|                        | /provided/ âŠ• is idempotent                            |

\columnbreak
* Set Theory

#+latex_header: \usepackage{sansmath}
#+latex_header: \newunicodechar{â™¯}{\raisebox{.3ex}{\tiny \text{\#}}}
#+latex_header_extra: \newunicodechar{â‡¨}{\ensuremath{ \rightarrowtriangle }}
#+latex_header: \newunicodechar{âˆ¼}{\raisebox{.3ex}{\tiny \ensuremath{\sim}}} % \~ via Agda input

The set theoretic symbols âˆˆ, =, âŠ†, are defined as follows.

*Axiom, Set Membership:*
$F âˆˆ \{x â™ R â€¢ E\} \quadâ‰¡\quad (âˆƒ x â™ R â€¢ F = E)$

*Axiom, Extensionality:*
$S = T \quadâ‰¡\quad (âˆ€ x â€¢ x âˆˆ S â‰¡ x âˆˆ T)$

*Axiom, Subset:*
$S âŠ† T \quadâ‰¡\quad (âˆ€ x â€¢ x âˆˆ S â‡’ x âˆˆ T)$

As witnessed by the following definitions, it is the âˆˆ relation that /translates
set theory to propositional logic/.

| *Universe*         | $x âˆˆ ğ‘¼$     | \quadâ‰¡\quad | $true$          |
| *Empty set*        | $x âˆˆ âˆ…$     | \quadâ‰¡\quad | $false$         |
| *Complement*       | $x âˆˆ âˆ¼ S$   | \quadâ‰¡\quad | $x âˆ‰ S$         |
| *Union*            | $x âˆˆ S âˆª T$ | \quadâ‰¡\quad | $x âˆˆ S âˆ¨ x âˆˆ T$ |
| *Intersection*     | $x âˆˆ S âˆ© T$ | \quadâ‰¡\quad | $x âˆˆ S âˆ§ x âˆˆ T$ |
| *PseudoComplement* | $x âˆˆ S â‡¨ T$ | \quadâ‰¡\quad | $x âˆˆ S â‡’ x âˆˆ T$ |
| *Difference*       | $x âˆˆ S - T$ | \quadâ‰¡\quad | $x âˆˆ S âˆ§ x âˆ‰ T$ |
| *Power set*        | $S âˆˆ â„™ T$   | \quadâ‰¡\quad | $S âŠ† T$         |

The pairs âˆ…|false, ğ‘¼|true, âˆª|âˆ¨, âˆ©|âˆ§, âŠ†|â‡’, âˆ¼|Â¬ are related by âˆˆ and so all
equational theorems of propositional logic also hold for set theory ---indeed,
that is because both are Boolean algebras.
\newline
â†’ Set difference is a residual wrt âˆª, and so satisfies the division properties below.
\newline
â†’ Subset is an order and so satisfies the aforementioned order properties.
It is bounded below by âˆ… and above by ğ‘¼.

The relationship between set comprehension and quantifier notation is:
| *Set comprehension as union* |   | $\{x â™ R â€¢ P\} \quad=\quad (âˆª x â™ R â€¢ \{P\})$ |
| *Membership as inclusion*    |   | $x âˆˆ S \quadâ‰¡\quad \{x\} âŠ† S$                 |
| *Equality as membership*     |   | $x = y \quadâ‰¡\quad x âˆˆ \{y\}$                 |

# (11.69) $(âˆƒ x â™ x âˆˆ S â€¢ x âˆ‰ T) â‡’ S â‰  T$.
#
# *# Theorem (11.7) â€œSimple Membershipâ€:*
# \newline   /e âˆˆ { x â™ P }  â‰¡ P[x â‰” e]/
#
# *# Theorem (11.6) â€œMathematical formulation of set comprehensionâ€:*
# \newline     /{x â™ P â€¢ E } = { y â™ (âˆƒ x â™ P â€¢ y = E) }/
#
# Equality as membership: x = y â‰¡ x âˆˆ {y}
# Membership as subset:   x âˆˆ y â‰¡ {x} âŠ† y

* Combinatorics

#+latex: {\color{white}.}\vspace{-1em}
  | *Axiom, Size:*     | $â™¯S = (Î£ x â™ x âˆˆ S â€¢ 1)$           |
  | *Axiom, Interval:* | $m..n \;=\; \{x : â„¤ â™ m â‰¤ x â‰¤ n\}$ |

The following theorems serve to define â€˜â™¯â€™ for the usual set theory operators.

|                                  |                                             |
| *Positive definite*                | $â™¯S âŠ† 0 \quadâ‰¡\quad S = âˆ…$                  |
| *Power set size*                   | $â™¯ â„™ S = 2^{â™¯S}$                            |
| *Principle of Inclusion-Exclusion* | $â™¯(S âˆª T) = â™¯S + â™¯T - â™¯(S âˆ© T)$             |
| *Monotonicity*                     | $S âŠ† T â‡’ â™¯S â‰¤ â™¯T$                           |
| *Difference rule*                  | $S âŠ† T â‡’ â™¯(T - S) = â™¯T - â™¯S$                |
| *Complement size*                  | $â™¯(âˆ¼ S) = â™¯ğ‘¼ - â™¯S$                       |
| *Range size*                       | $(Î£ x : ğ‘¼ â™ x âˆ‰ S â€¢ 1) \;=\; â™¯ğ‘¼ - â™¯S$       |
| *Interval size*                    | $â™¯(m..n) \;=\; n - m + 1\;$ for $\;m â‰¤ n$   |
| *Pigeonhole Principle*             | $(Î£ i : 1..n â€¢ E)/n \;â‰¤\; (â†‘ i : 1..n â€¢ E)$ |
| ( /â€œmin â‰¤ avg â‰¤ maxâ€/ )            | $(â†“ i : 1..n â€¢ E) â‰¤ (Î£ i : 1..n â€¢ E)/n$     |

**Rule of sum:**
$â™¯(âˆª i â™ R\, i â€¢ P) \;=\; (Î£ i â™ R\, i â€¢ â™¯P)$
\newline provided the range is pairwise disjoint:
$âˆ€ i,j â€¢ R\, i âˆ§ R\, j â‰¡ i = j$.

*Rule of product:*
$â™¯(\times i â™ R\, i â€¢ P) \;=\; (Î  i â™ R\, i â€¢ â™¯P)$

# \newpage

* COMMENT Ï„â¿
Let $Ï„â¿$ denote the sequences of elements of type
Ï„ of length $n$; i.e., the functions $1..n â†’ Ï„$.

#+latex: \def\distinct{\mathsf{distinct}\,}

Let $\distinct s \;â‰¡\; (âˆ€ i, j : 1..n â€¢ s\, i = s\, j â‰¡ i = j)$.

*Axiom, Permutation:*
$P(n, r) \;=\; (Î£ s : (1..n)^r â™ \distinct s â€¢ 1)$

*Theorem, Permutation:*
$P(n, r) \;=\; n! / (n - r)!$

*Theorem, Permutations with repetition:*
$(Î£ s : (1..n)^r â€¢ 1) \;=\; n^r$

*Axiom, Combination:*
$\binom{n}{r} \;=\; (Î£ s : â„™ 1..n â™ â™¯s = r â€¢ 1)$

*Theorem, Combination:*
$\binom{n}{r} \;=\; n! / (r! Â· (n - r)!)$

* Converse ---an over-approximation of inverse (A4)

#+latex_header: \newunicodechar{Ë˜}{\raise0.5ex\hbox{\tiny$\smallsmile$}}
#+latex_header: \def\fcmp{\mathop{\fatsemi}}
#+latex_header: \newunicodechar{â¨¾}{\ensuremath{\fcmp}}

#+latex: {\color{white}.}\vspace{-1em}

# Axioms,
| *Co-distributivity*     | *Ë˜Ë˜, Involutive* | *Monotonicity*        |
| $(x â¨¾ y) Ë˜ = y Ë˜ â¨¾ x$ | $x Ë˜ Ë˜ = x$    | $x âŠ‘ y â‡’ x Ë˜ âŠ‘ y Ë˜$ |

# Theorems,

| *Identity*      | *Isotonicity* | *Connection*              | *Elimination*             |
| $\Id Ë˜ = \Id$ | $x âŠ‘ y \;â‰¡\; x Ë˜ âŠ‘ y Ë˜$            | $a Ë˜ âŠ‘ b \;â‰¡\; a âŠ‘ b Ë˜$ | $x Ë˜ = y Ë˜ \;â‰¡\; x = y$ |

* Residuals, Division
#+begin_export latex
\def\univalent{\mathsf{univalent}\,}
\def\surjective{\mathsf{surjective}\,}
\def\total{\mathsf{total}\,}
\def\injective{\mathsf{injective}\,}
\def\mapping{\mathsf{mapping}\,}
\def\bijective{\mathsf{bijective}\,}
\def\iso{\mathsf{iso}\,}
#+end_export

# + latex_header: \newunicodechar{â•±}

Suppose we have an associative operation ~_â¨¾_~ with identity $\Id$ and two
operations â€œunder â•²â€ and â€œover â•±â€ specified as follows.

|                                   |   |                                   |
| *Characterisation of â•±*             |   | *Characterisation of â•²*             |
| $a â¨¾ b âŠ‘ c \quadâ‰¡\quad a âŠ‘ c â•± b$ |   | $a â¨¾ b âŠ‘ c \quadâ‰¡\quad b âŠ‘ a â•² c$ |

#+latex: {\remark{When â¨¾ is symmetric, as in the special cases $â¨¾ = âŠ“$, the divisions coincide: $x â•± y \;=\; y â•² x$.}}

#
|                       |                                 |   |                                 |
| *Cancellation*          | $(a â•± b) â¨¾ b âŠ‘ a$               |   | $a â¨¾ (a â•² b) âŠ‘ b$               |
| *Dividing a division*   | $(a â•± b) â•± c \;=\; a â•± (c â¨¾ b)$ |   | $a â•² (b â•² c) \;=\; (b â¨¾ a) â•² c$ |
| *Division of multiples* | $a âŠ‘ (a â¨¾ b) â•± b$               |   | $b âŠ‘ a â•² (a â¨¾ b)$               |
|                       |                                 |   |                                 |
#

| *Monotonicity of â¨¾*             | $a âŠ‘ aâ€² âˆ§ b âŠ‘ bâ€² â‡’ a â¨¾ b âŠ‘ aâ€² â¨¾ bâ€²$ |
| *Subdistributivity of â¨¾ over âŠ“* | $a â¨¾ (b âŠ“ c) \;âŠ\; a â¨¾ b âŠ“ a â¨¾ c$   |

:Subdist_pf:
a â¨¾ (b âŠ“ c)
= a â¨¾ (b âŠ“ c)  âŠ“ a â¨¾ (b âŠ“ c)   -- âŠ“ idemp
âŠ a â¨¾ b  âŠ“  a â¨¾ c              -- monotonicity of â¨¾ and weakening x âŠ“ y âŠ x
:End:

#
|                          |                           | |                            |
| *Numerator monotonicity*   | $b âŠ‘ bâ€² â‡’ a â•² b âŠ‘ a â•² bâ€²$ | | $b âŠ‘ bâ€²  â‡’ b â•± a âŠ‘ bâ€² â•± a$ |
| *Denominator antitonicity* | $aâ€² âŠ‘ a â‡’ a â•² b âŠ‘ aâ€² â•² b$ | | $aâ€² âŠ‘ a  â‡’ b â•± a âŠ‘ b â•± aâ€²$ |
# | *Self-reflexivity*         | $\Id âŠ‘ a â•² a$             | $\Id âŠ‘ a â•± a$              |
# | *Denominator Identity*     | $\Id â•² a = a$             | $a â•± \Id = a$              |
# | *Numerator Zero*           | $a â•² âŠ¤ = âŠ¤$               | $âŠ¤ â•± a = âŠ¤$                |
# | *Wraparound rule*          | $âŠ¥ â•² a = âŠ¤$               | $a â•± âŠ¥ = âŠ¤$                |
| *Exact division* | $(âˆƒ z â€¢ y = x â¨¾ z)$ | â‰¡ | $x â¨¾ (x â•² y) = y$ |
| *Exact division* | $(âˆƒ z â€¢ y = x â•² z)$ | â‰¡ | $x â•² (x â¨¾ y) = y$ |

# The next set of rules dicate how we can distribute a meet into a division.
*Modal and Dedekind rules:*
# Taking a â‰” a Ë˜ in the left side rules makes them look more like the right side
# rules (â€¢Ì€á´—â€¢Ì)Ùˆ
| \remark{ (Axioms) }                         |   | \remark{ (Theorems) }                     |
| $a â¨¾ b âŠ“ c \;âŠ‘\; a â¨¾ (b âŠ“ a Ë˜ â¨¾ c)$         |   | $a â•² b âŠ“ c \;âŠ‘\; a â•² (b âŠ“ a â¨¾ c)$         |
| $a â¨¾ b âŠ“ c \;âŠ‘\; (a âŠ“ c â¨¾ b Ë˜) â¨¾ b$         |   | $a â•² b âŠ“ c \;âŠ‘\; (a âŠ“ c â•² b) â•² b$         |
| $a â¨¾ b âŠ“ c \;âŠ‘\; (a âŠ“ c â¨¾ bË˜)â¨¾(b âŠ“ aË˜ â¨¾ c)$ |   | $a â•² b âŠ“ c \;âŠ‘\; (a âŠ“ c â•² b)â•²(b âŠ“ a â¨¾ c)$ |

# In the presence of complements, Dedekind â‡” Schroder Equivalences â‡” Division
# characterisations (â€¢Ì€á´—â€¢Ì)Ùˆ

#+latex: \vspace{0.5em}

Division for the special case $â¨¾ = âŠ“$ is known /the relative pseudo-complement/:
Denoted $x \rightarrowtriangle y$ (/â€œx implies yâ€/), it is /the largest piece
â€˜outsideâ€™ of x that is still included in y/.  The relative pseudocomplement
/internalises inclusion/, $z âŠ‘ (x â‡¨ y) \;â‡’\; \big(z âŠ‘ x â‡’ z âŠ‘ y\big)$; more
generally: $x âŠ‘ y \;â‰¡\; \Id âŠ‘ x â•² y$.

:Proof:
(â‡’)
  z âŠ‘ x â‡¨ y  âˆ§  z âŠ‘ x
â‰¡ z âŠ“ x âŠ‘ y  âˆ§  z âŠ“ x = z
â‡’ z âŠ‘ y

What about (â‡), is that true?

-   z âŠ‘ (x â‡¨ y) â‰¡ z âŠ‘ x â‡’ z âŠ‘ y

Maybe not.
:End:

# a â‡¨ b is the largest value that along with â€˜aâ€™ leads to â€˜bâ€™; ie it allows
# modus ponens.

# The rules that define â‡¨ and - are â€œshunting rulesâ€: We shunt
# a (for â‡¨) to the right, and shunt b (for -) to the right.

#+latex: \vspace{0.7em}
| Pseudo-complement           | Semi-complement               |
| $x âŠ“ a âŠ‘ b \;â‰¡\; x âŠ‘ a â‡¨ b$ | $a - b âŠ‘ x  \;â‰¡\;  a âŠ‘ b âŠ” x$ |
|                             |                               |
| Strong modus ponens         | Absorption                    |
| $a âŠ“ (a â‡¨ b) \;=\; a âŠ“ b$   | $(x âŠ” b) - b \;=\; x - b$     |
| $a â‡¨ (x âŠ“ a) \;=\; a â‡¨ x$   | $(a - b) âŠ” b \;=\; a âŠ” b$     |

# Ones on left are by indirect inclusion from below (since we're working with meets)
# and the rights are proven by indirect inclsuion from above (since we're working
# with joins) (â€¢Ì€á´—â€¢Ì)Ùˆ

# Taking b â‰” âŠ¥ in the top left give us the â€œdisjointnessâ€ requirement of
# complements;
# Taking a â‰” âŠ¤ in the bot right gives us the â€œexhaustivnessâ€ requirement of
# complements.

# pseudo-complement:  x âŠ‘ a â‡’ b  â‰¡  x âŠ“ a âŠ‘ b

# semi-complement:    a - b âŠ‘ x â‰¡   a âŠ‘ x âŠ” b

Division for the special case $â¨¾ = âŠ”$ in the /dual order/ (âŠ’) is known as /the
difference/ or /relative semi-complement/: Denoted $x - y$ (/â€œx without yâ€/), it is /the
smallest piece that along with y â€˜coversâ€™ x/; i.e., it is the least value that
â€˜complementsâ€™ (â€œfill up togetherâ€) $y$ to include $x$.
#+latex: {\remark{( Possibly for this reason, set difference is sometimes denoted $S â•² T$ in other books! )}}
#
# # semi-complement:    x âŠ” b âŠ’ a  â‰¡  x âŠ’ a - b

# Semi-complements and psueod-complements let us treat meets and joins with â€œthe
# otherâ€ inclusions; e.g., âŠ” appears on the lower side of âŠ‘ in âŠ”-char, but âŠ” may
# appear on the greater side of âŠ‘ in â€˜-â€™-char.

# In a Boolean lattice,  a - b  =  Â¬ a âŠ“ b  and  a â‡¨ b  =  Â¬ a âŠ” b

\columnbreak

# +latex: \vspace{-5cm}

** COMMENT Residuals are stronger than converse

 With residuals, we can prove modal rules

 whereas with modal rules we cannot generally produce residuals ---which
 secretly hide negations ;-)

* Named Properties

#+begin_export  latex
\def\refl{\mathsf{reflexive}\,}
\def\irrefl{\mathsf{irreflexive}\,}
\def\sym{\mathsf{symmetric}\,}
\def\antisym{\mathsf{antisymmetric}\,}
\def\asym{\mathsf{asymmetric}\,}
\def\trans{\mathsf{transitive}\,}
\def\idemp{\mathsf{idempotent}\,}
#+end_export

#+begin_2parallel

| $\refl$   | $x$ | â‰¡ | $\Id âŠ‘ x$     |
| $\irrefl$ | $x$ | â‰¡ | $\Id âŠ“ x = âŠ¥$ |
| $\trans$  | $x$ | â‰¡ | $x â¨¾ x âŠ‘ x$   |
| $\idemp$  | $x$ | â‰¡ | $x â¨¾ x = x$   |

#+latex: \columnbreak \vspace{-1cm}

| $\sym$     | $x$ | â‰¡ | $x Ë˜ = x$       |
| $\antisym$ | $x$ | â‰¡ | $x âŠ“ x Ë˜ âŠ‘ \Id$ |
| $\asym$    | $x$ | â‰¡ | $x âŠ“ x Ë˜ = âŠ¥$   |

#+end_2parallel

:Equivs_and_orders:
$R$ is an \textbf{equivalence (relation) on $B$} iff it is reflexive,
transitive, and
symmetric.

$R$ is a \textbf{(partial) order on $B$} iff it is reflexive, transitive, and\\\hfill
antisymmetric.

$R$ is a \textbf{strict-order on $B$} iff it is irreflexive, transitive, and
asymmetric.
:End:

The above properties are preserved by converse: Let $P$ be any of the above
properties, then $P \, x \;â‰¡\; P (x Ë˜)$.

#
# | â‹† â‹† â‹†  |
#


| /            |     |   |                                 | <             |     |   |                                    |
| $\univalent$ | $x$ | â‰¡ | $x Ë˜ â¨¾ x âŠ‘ \Id$                 | $\injective$  | $x$ | â‰¡ | $x â¨¾ x Ë˜ âŠ‘ \Id$                    |
| $\total$     | $x$ | â‰¡ | $\Id âŠ‘ x â¨¾ x Ë˜$                 | $\surjective$ | $x$ | â‰¡ | $\Id âŠ‘ x Ë˜ â¨¾ x$                    |
| $\mapping$   | $x$ | â‰¡ | $\total x \;âˆ§\; \univalent x$   | $\bijective$  | $x$ | â‰¡ | $\surjective x \;âˆ§\; \injective x$ |
| $\iso$       | $x$ | â‰¡ | $\mapping x \;âˆ§\; \bijective x$ |               |     |   |                                    |


# :columnbreak:

#
#+latex: \vspace{1em}

#+begin_parallel

| *Duality theorems*                                                    |
|                                                                     |
| $\univalent(x Ë˜)               \quad â‰¡ \quad \injective \hspace{0.5em} x$   |
| $\total \hspace{1.8em}   (x Ë˜) \quad â‰¡ \quad \surjective  x$         |
| $\mapping \,(x Ë˜)              \quad â‰¡ \quad \bijective \hspace{0.4em} x$         |
| $\iso \hspace{2.6em}(x Ë˜)      \quad â‰¡ \quad \iso \hspace{2.7em} x$ |

#+latex: \vspace{1em}

| *Invertiblility theorems*                                        |
|                                                                |
| $\total x âˆ§ \injective x â‡’ x â¨¾ x Ë˜ = \Id$                      |
| $\iso x \quadâ‰¡\quad x â¨¾ xË˜ = \Id \;âˆ§\; x Ë˜ â¨¾ x = \Id$          |
| $\iso x \quadâ‡’\quad (\exists g \bullet\; x â¨¾ g = \Id = g â¨¾ x)$ |

#+end_parallel

# *Division

#+latex: \vspace{1em}

*Shunting laws:*
| $\univalent f$ | â‡’ | $(x â¨¾ f âŠ‘ y  â‡  x âŠ‘ y â¨¾ f Ë˜ )$  |
| $\total f$     | â‡’ | $(x â¨¾ f âŠ‘ y  \;â‡’\;  x âŠ‘ y â¨¾ f Ë˜ )$ |
| $\mapping f$   | â‡’ | $( x â¨¾ f âŠ‘ y  \;â‰¡\;\,  x âŠ‘ y â¨¾ f Ë˜ )$   |

* Relations

# From CalcCheckStyle
#+latex_header: \usepackage{lapdf}
#+begin_export latex
\newcommand\lbtsbrak{%
%% %    \tikz[line cap=round,x=1ex,y=1ex,line width=0.8pt]
%%     \tikz[x=1ex,y=1ex,line width=1.1pt]
%%     {\draw (0.6,2) -- (0.0,1.5) -- (0.0,0.5) -- (0.6,0.0);}%
{\unitlength1ex%
\begin{lapdf}(0.25,2)(-0.05,-0.3)
  %\Setwidth(0.02) \Setcap(1) \Setdash([] 0) \Setjoin(1)}
  \Setwidth(0.3)
  \Setcap(2)
  \Setjoin(2)
  \Moveto(0.6,1.9)
  \Lineto(0,1.4)
  \Lineto(0,0.4)
  \Lineto(0.6,-0.1)
  %\Closepath
  %\Polyline(0.6,2)(0,1.5)(0,0.5)(0.6,0)
  \Stroke
\end{lapdf}}
}

\newcommand\rbtsbrak{%
%% %    \tikz[line cap=round,x=1ex,y=1ex,line width=0.8pt]
%%     \tikz[x=1ex,y=1ex,line width=1.1pt]
%%     {\draw (0.0,2) -- (0.6,1.5) -- (0.6,0.5) -- (0.0,0.0);}%
{\unitlength1ex%
\begin{lapdf}(0.25,2)(-0.35,-0.3)
  \Setwidth(0.3)
  \Setcap(2)
  \Setjoin(2)
  \Moveto(0.0,1.9)
  \Lineto(0.6,1.4)
  \Lineto(0.6,0.4)
  \Lineto(0.0,-0.1)
  %\Polyline(0,2)(0.6,1.5)(0.6,0.5)(0,0)
  \Stroke
\end{lapdf}}
}

\def\LRelRaw{\lower0.4ex\hbox{\lbtsbrak}}
\def\RRelRaw{\lower0.4ex\hbox{\rbtsbrak}}
\def\LRel{\kern0.3em\LRelRaw\kern0.2em}
\def\RRel{\kern0.2em\RRelRaw\kern0.3em}
\def\infixREL#1{\LRel #1 \RRel}

% a \infixREL{R} b
#+end_export

#+latex_header: \newunicodechar{ã€”}{\ensuremath{\LRel}}
#+latex_header: \newunicodechar{ã€•}{\ensuremath{\RRel}}

Relations are sets of pairs ...

# Translating between Relation Algebra and Predicate Logic

# RA and PL
# The Axioms of Set Theory --- Applied to Binary Relations
#+latex: \vspace{-0.7em}
|                  |                                  |   |                                                   |
| Tortoise         | $x ã€” R ã€• y$                    | â‰¡ | $âŸ¨x, yâŸ© âˆˆ R$                                      |
| Extensionality   | $R = S$                          | â‰¡ | $(\forall\ x,y \;â€¢\;  xã€” Rã€•y \equiv xã€”Sã€•y)$   |
| Inclusion        | $R \subseteq S$                  | â‰¡ | $(\forall\ x,y \;â€¢\;  x ã€”Rã€•y \implies xã€”Sã€•y)$ |
| Empty            | $u ã€”\emptysetã€• v$              | â‰¡ | $\false$                                          |
| Universe         | $u ã€”A \times Bã€• v$             | â‰¡ | $u \in A \;\land\; v \in B$                       |
| Complement       | $u ã€”âˆ¼ Sã€• v$                    | â‰¡ | $\lnot (u ã€”Sã€• v)$                               |
| Union            | $u ã€”S âˆª Tã€• v$                  | â‰¡ | $u ã€”Sã€• v \;\lor\; uã€”Tã€•v$                      |
| Intersection     | $uã€”S âˆ© Tã€•v$                    | â‰¡ | $uã€”Sã€• v \;\land\; uã€”Tã€•v$                      |
| Difference       | $uã€”S - Tã€• v$                   | â‰¡ | $uã€”Sã€•v \;\land\; \lnot(uã€”Tã€•v)$                |
| PseudoComplement | $uã€”S \rightarrowtriangle Tã€• v$ | â‰¡ | $uã€”Sã€•v \;\implies\; uã€”Tã€•v$                    |
| /An/ Identity      | $u ã€”ğ•€ \ Aã€• \, v$               | â‰¡ | $u = v \in A$                                     |
| /The/ Identity     | $u ã€”\Idã€• \, v$                 | â‰¡ | $u = v$                                           |
| Converse         | $uã€” RË˜ã€• v$                     | â‰¡ | $vã€” Rã€• u$                                       |
| Composition      | $uã€”R \fcmp Sã€• v$               | â‰¡ | $(\exists\ x \;â€¢\;\;  uã€”Rã€•x \;\land\; xã€”Sã€•v)$ |
| Under Division   | $u ã€” S â•² R ã€• v$                 | â‰¡ | $(âˆ€ x â€¢ x ã€”Sã€• u  â‡’  x  ã€”Rã€• v)$                |
| Over Division    | $u ã€” R â•± S ã€• v$                  | â‰¡ | $(âˆ€ y â€¢ v ã€”Sã€• y  â‡’  u ã€”Rã€• y)$                       |

# Râ•²S â€œright residualâ€

:Hide:
/â€œResiduals arise from negating compositionsâ€:/ By comparing symbol-by-symbol in
the RHS of â€˜â¨¾â€™ and â€˜â•±â€™, it is not difficult to see that $S â•± R \;\;=\;\;
âˆ¼\big(R â¨¾ âˆ¼ S Ë˜\big)Ë˜ \;\;=\;\; âˆ¼\big(âˆ¼ S â¨¾ R Ë˜\big)$ ---note
$\big(âˆ¼ T\big)Ë˜ \;=\; âˆ¼ \big(T Ë˜\big)$.
:End:

# Sâ•±R = Â¬(Â¬S â¨¾ RË˜)
# Râ•²S = Â¬(RË˜ â¨¾ Â¬S)

#+latex: \def\E{\mathsf{E}}
*Example:* Define $x ã€”\Eã€• X \;â‰¡\; x âˆˆ X$, then $A ã€”\E â•² \Eã€•B \;â‰¡\; A âŠ† B$.
# Likewise, $X ã€”\E â•² \E \,âˆ©\, âˆ¼ \E Ë˜ â•± âˆ¼ \E Ë˜ ã€• Y \;â‰¡\; Y = âˆ¼ X$.
# i.e., a symmetric quotient! Relationships of equalities are syqs!

#+latex: \vspace{-0.7em}
#+latex: \def\L{\mathsf{L}}
*Example (Indirect inclusion):*
Define $x ã€”\Lã€• y \;â‰¡\; x âŠ‘ y$, then $\L â•² \L = \L â•± \L = \L$.

:identity_rel:
The identity relation on \ $B : \SET {t}$ \;
  is \  $\;\relId\ {B} \; :\; t \rel t$:

 $\;\relId\ {B} \; =\; \{ x : t \with x \in B \spot \langle x , x
  \rangle \}$:

$x \infixREL{\relId\ {B}}\ y \quad\equiv\quad x = y \in B$
:end:
:universe_rel:
The {universal relation} on $\; B \times C\;$ is $\;B \times C$
$x\ \infixREL{B \times C}\ y \quad\equiv\quad x \in B \land y \in C$
ie
$\langle x, y \rangle \ \in\ B \times C \quad\equiv\quad x \in B \land y \in C$
:End:

* newpage :ignore:
#+latex: \newpage

* Interpreting Named Properties

We will interpret the named properties using
- Relations: Formulae on sets of pairs; â€œ $\forall x â€¢ â€¦$ â€
- Graphs: Dots and lines on a page
- Matrices: 1s and 0s on a grid
- Programs: Transformations of inputs to outputs

# space
|   |


#+latex: \vspace{2.1cm}
* Properties of a relationship flavour

| $\refl$    | $R$ | â‰¡ | $(\forall\ b  \;â€¢\; b\infixREL{R}b )$                                                          |
|            |     |   | \remark{Every node in a graph has a â€˜loopâ€™, a line to itself}                                  |
|            |     |   | \remark{(Thus, paths can always be increased in length: $R âŠ† Râ¨¾R$)}                            |
|            |     |   | \remark{The diagonal of a matrix is all 1s}                                                    |
|            |     |   |                                                                                                |
| $\irrefl$  | $R$ | â‰¡ | $(\forall\ b  \;â€¢\; \lnot (b\infixREL{R}b ))$                                                  |
|            |     |   | \remark{No node in a graph has a loop}                                                         |
|            |     |   | \remark{The diagonal of a matrix is all 0s}                                                    |
|            |     |   |                                                                                                |
| $\sym$     | $R$ | â‰¡ | $(\forall\ b, c  \;â€¢\; b\infixREL{R}c \equiv c\infixREL{R}b )$                                 |
|            |     |   | \remark{The graph is undirected; we have a symmetric matrix}                                   |
|            |     |   |                                                                                                |
| $\antisym$ | $R$ | â‰¡ | $(\forall\ b, c  \;â€¢\; b\infixREL{R}c \land c\infixREL{R}b \;\implies\; b = c )$               |
|            |     |   | \remark{Mutually related nodes are necessairly self-loops}                                     |
|            |     |   | \remark{â€œMutually related items are necessairly indistinguishableâ€}                            |
|            |     |   |                                                                                                |
| $\asym$    | $R$ | â‰¡ | $(\forall\ b, c  \;â€¢\; b\infixREL{R}c \;\implies\; \lnot ( c\infixREL{R}b ) )$                 |
|            |     |   | @@latex:\remark{\hspace{-.0em}At most 1 edge (regardless of direction) relating any 2 nodes}@@ |
|            |     |   |                                                                                                |
| $\trans$   | $R$ | â‰¡ | $(\forall b, c, d \;â€¢\; b\infixREL{R}c\infixREL{R}d \;\implies\; b\infixREL{R}d)$              |
|            |     |   | \remark{Paths can always be shortened (but nonempty)}                                          |
|            |     |   |                                                                                                |
| $\idemp$   | $R$ | â‰¡ | \remark{Lengths of paths can be changed arbitrarily (nonzero)}                                 |
|            |     |   |                                                                                                |

# | trans              |     |   | \remark{In the graph, any 2-step path can be replaced with a 1-step path}                 |

#+latex: \vfill
/Intuitively/, by considering the interpretations only, we find
\[\refl R \;âˆ§\; \trans R \;â‡’\; \idemp R\] Super cool stuff!


#+latex: \vfill{\color{white}.}\columnbreak
* /â€œRelations are simple graphsâ€/

Relations directly represent /simple graphs/: Dots (/nodes/) and at most 1 line
(/edge/) between any two.  E.g., cities and highways
#+latex: {\color{grey!80} (ignoring multiple highways)}.
# In a simple graph, no two edges have the same source and the same target. (No
#  â€œparallel edgesâ€.)

Treating $R$ as a graph:
|                    |                                                                          |
| $R$                | A bunch of dots on a page and an arrow from $x$ to $y$ when $x ã€” R ã€•y$ |
| $RË˜$               | Flip the arrows in the graph                                             |
| $\mathsf{Dom}\, R$ | The nodes that have an outgoing edge                                     |
| $\mathsf{Ran}\, R$ | The nodes that have an incoming edge                                     |
| $x ã€”Rã€•y$         | A path of length 1 (an edge) from $x$ to $y$                             |
| $x ã€”R â¨¾ Rã€• y$    | A path of length 2 from $x$ to $y$                                       |
| $R âˆª RË˜$           | The associated undirected graph (â€œsymmetric closureâ€)                    |
|                    |                                                                          |

* Properties of an operational flavour

| $\univalent$  | $R$ | â‰¡ | $(âˆ€ b, c, câ€² \;â€¢\; b ã€”Rã€• c \,âˆ§\, b ã€”Rã€• câ€² \;â‡’\; c = câ€²)$ \remark{---aka â€œpartial functionâ€ } |
|               |     |   | \remark{Graph: Every node has at most one outgoing edge}                                         |
|               |     |   | \remark{Matrix: Every row has at most one 1}                                                     |
|               |     |   | \remark{Prog: The program is deterministic, same-input yields same-output}                       |
|               |     |   |                                                                                                  |
| $\injective$  | $R$ | â‰¡ | $(âˆ€ b, bâ€², c \;â€¢\; b ã€”Rã€• c \,âˆ§\, bâ€² ã€”Rã€• c \;â‡’\; b = bâ€²)$                                     |
|               |     |   | \remark{Graph: Every node has at most one incoming edge}                                         |
|               |     |   | \remark{Matrix: Every column has at most one 1}                                                  |
|               |     |   | \remark{Prog: The program preserves distinctness (by contraposition)}                            |
|               |     |   |                                                                                                  |
| $\total$      | $R$ | â‰¡ | $(âˆ€ b \;â€¢\; âˆƒ c \;â€¢\; b ã€”Rã€•c)$                                                                 |
|               |     |   | \remark{Graph: Every node has at least one outgoing edge}                                        |
|               |     |   | \remark{Matrix: Every row has at least one 1}                                                    |
|               |     |   | \remark{Prog: The program terminates; has at least one output for each input}                    |
|               |     |   |                                                                                                  |
| $\surjective$ | $R$ | â‰¡ | $(âˆ€ c \;â€¢\; âˆƒ b \;â€¢\; b ã€”Rã€• c)$                                                                |
|               |     |   | \remark{Graph: Every node has at least one incoming edge}                                        |
|               |     |   | \remark{Matrix: Every column has at least one 1}                                                 |
|               |     |   | \remark{Prog: All possible outputs arise from some input}                                        |
|               |     |   |                                                                                                  |
| $\mapping$    | $R$ | â‰¡ | $\total R \;âˆ§\; \univalent R$ \remark{---also known as a â€œ(total) functionâ€ }                    |
|               |     |   | \remark{Graph: Every node has exactly one outgoing edge}                                         |
|               |     |   | \remark{Matrix: Every row has exactly one 1}                                                     |
|               |     |   | \remark{Prog: The program always terminates \iffalse deterministicly\fi with a unique output}    |
|               |     |   |                                                                                                  |
| $\bijective$  | $R$ | â‰¡ | $\surjective R \;âˆ§\; \injective R$                                                               |
|               |     |   | \remark{Graph: Every node has exactly one incoming edge}                                         |
|               |     |   | \remark{Matrix: Every column has exactly one 1}                                                  |
|               |     |   | \remark{Prog: Every output arises from a unique input}                                           |
|               |     |   |                                                                                                  |
| $\iso$        | $R$ | â‰¡ | $\mapping R \;âˆ§\; \bijective R$                                                                  |
|               |     |   | \remark{Graph: It's a bunch of â€˜circlesâ€™}                                                        |
|               |     |   | \remark{Matrix: It's a permutation; a re-arrangement of the identity matrix}                     |
|               |     |   | \remark{Prog: A non-lossy protocol associating inputs to outputs }                               |

# an iso relation treated as a simple graph is a bunch of circles:
# Any number of cycles, such that every node lies on exactly one.

* COMMENT Quantification
  :PROPERTIES:
  :CUSTOM_ID: COMMENT-Quantification
  :END:

+ Axiom, Leibniz for range ::
  /(âˆ€ x â€¢ R â‰¡ Râ€²) â‡’ (âŠ• x â™ R â€¢ P) = (âŠ• x â™ Râ€² â€¢ P)/

+ Axiom, Leibniz for body ::
  /(âˆ€ x â€¢ P = Pâ€²) â‡’ (âŠ• x â™ R â€¢ P) = (âŠ• x â™ R â€¢ Pâ€²)/

+ General One-point rule ::
  | $(âŠ• x â™ R âˆ§ x = E â€¢ B)$ | $=$ | /if R[x â‰” E] then B[x â‰” E] else id_âŠ• fi/ |

+ Maxima ::
  - z = (â†‘ x â€¢ f x) â‰¡ (âˆƒ x â€¢ z = f x) âˆ§ (âˆ€ x â€¢ f x â‰¤ z)
  - f z = (â†‘ x â™ R x â€¢ f x) â‰¡ R z âˆ§ (âˆ€ x â™ R x â€¢ f x â‰¤ f z)
